"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Draad=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.element=t,this.parent=this.findAncestor(document.getElementsByClassName(t)[0],e.parentClass)||document.getElementsByTagName("body")[0],this.smoothing=e.smoothing,this.offsetX=e.offsetX,this.offsetY=e.offsetY,this.fill=e.fill,this.color=e.color,this.lineWidth=e.lineWidth,this.lineOpacity=e.lineOpacity,this.dasharray=e.dasharray,this.cap=e.cap,this.responsive=e.responsive,this.options=e,this.init()}return _createClass(n,[{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e);)return t}},{key:"goThroughDots",value:function(){var t=document.getElementsByClassName(this.element),e=[],n=this.offsetX,s=this.offsetY;if(this.parent===document.getElementsByTagName("body")[0])for(var i=0;i<t.length;i++){var a=document.getElementsByClassName(this.element)[i],r=n||a.offsetWidth/2,o=s||a.offsetHeight/2,l=parseInt(a.getBoundingClientRect().left+r,10),h=parseInt(a.getBoundingClientRect().top+o,10);e.push([l,h])}else for(var c=0;c<t.length;c++){var u=document.getElementsByClassName(this.element)[c],f=n||u.offsetWidth/2,d=s||u.offsetHeight/2,g=parseInt(u.offsetLeft+f,10),m=parseInt(u.offsetTop+d,10);e.push([g,m])}return e}},{key:"connectingMagic",value:function(t){var u=this.smoothing||.2,e=this.parent,a=function(t,e,n,s){var i,a,r,o,l=(i=e||t,r=(a=n||t)[0]-i[0],o=a[1]-i[1],{length:Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),angle:Math.atan2(o,r)}),h=l.angle+(s?Math.PI:0),c=l.length*u;return[t[0]+Math.cos(h)*c,t[1]+Math.sin(h)*c]},n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg");s.setAttribute("class","draad-line draad-line--"+this.element);var i,r=document.createElementNS(n,"path");r.setAttribute("d",(i=function(t,e,n){var s=a(n[e-1],n[e-2],t),i=a(t,n[e-1],n[e+1],!0);return"C "+s[0]+","+s[1]+" "+i[0]+","+i[1]+" "+t[0]+","+t[1]},t.reduce(function(t,e,n,s){return 0===n?"M "+e[0]+","+e[1]:t+" "+i(e,n,s)},""))),r.setAttribute("fill","none"),r.setAttribute("stroke","black"),s.appendChild(r);var o=this.fill,l=this.color,h=this.lineWidth,c=this.lineOpacity,f=this.dasharray,d=this.cap;r.setAttribute("style","fill: "+o+"; stroke: "+l+"; stroke-width: "+h+";stroke-opacity: "+c+";stroke-dasharray: "+f+";stroke-linecap: "+d),s.setAttribute("style","width: 100%; height: 100%; top: 0; left: 0; bottom: 0; right: 0; position: absolute; "),e.appendChild(s)}},{key:"init",value:function(){var t=this;this.connectingMagic(this.goThroughDots());var e=this;!0===this.responsive&&window.addEventListener("resize",function(){t.resize(e)})}},{key:"resize",value:function(t){document.getElementsByClassName("draad-line--"+t.element)[0].remove(),this.connectingMagic(t.goThroughDots())}},{key:"destroyDraad",value:function(){window.removeEventListener("resize",this.resize),this.options={},document.getElementsByClassName("draad-line--"+this.element)[0].remove()}},{key:"destroy",get:function(){return this.destroyDraad()}}]),n}();exports.default=Draad;